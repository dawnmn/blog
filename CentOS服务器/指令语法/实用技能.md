**at：定时任务**
```
at 23:59 12/31/2018
# 输入命令内容
php /path/task.php
# 保存
ctrl+d
 
# 查看
atq
# 删除
atrm 1
```

**crontab：计划任务**
```
# 帮助文档
cat /etc/crontab

# 查看已有计划任务
crontab -l
 
# 编辑计划任务
crontab -e
 
# 使用全路径 采用超时控制+锁机制，解决两个连续任务同时运行的问题
timeout -s SIGINT 100s flock -xn /tmp/task.lock /usr/local/php/bin/php /path/task.php
 
# 重新载入任务列表
service crond reload

# 安装
yum install vixie-cron
yum install crontabs
service crond start
```
**timeout：超时命令**
`timeout [OPTION] DURATION COMMAND [ARG]...`
时间单位：`s` 秒 `m` 分钟 `h` 小时 `d` 天

`-s`：`--signal`，指定在超时时发送的信号，查看`kill -l`以获得信号列表。

使用示例：
```
timeout -s SIGKILL 1m curl http://192.168.2.70:9080/#/admin-page
```
**flock：文件锁**
`flock [options] <file|directory> <command> [command args]`

它的第一个参数是文件描述符，在此文件描述符关闭时，锁会自动释放。而当进程终止时，所有的文件描述符均会被关闭。
`-s` 共享锁，默认阻塞 `-x` 独占锁（默认），默认阻塞 `-n` 非阻塞，如果无法立即获取锁，则立即退出 `-w` 等待锁超时，单位秒
使用示例：


```
flock /tmp/a.lock sleep 10
```

查看系统当前存在的锁
```
lslocks|grep FLOCK
```
**zip/unzip：压缩解压**
```
# 压缩
zip -q -r html.zip /home/html
# unzip中文乱码
unzip -O gbk 1.zip
```
**netstat：查看网络信息（tcp/udp）**
`-a` 显示所有 `-n` 使用ip地址 `-t` 只查询tcp `-u` 只查询udp `-p` 显示进程号 `-l`显示监听中的 `-c` 持续输出信息

统计tcp各状态数目：
```
netstat -antpl|awk '/tcp/ {print $6}'|sort|uniq -c
```

查看端口号对应进程号，根据进程号查找进程：
```
netstat -antpl|grep 9080
ps -ef|grep 21904
```
**traceroute：追踪路由**
```
# 安装
yum -y install traceroute
# 使用
traceroute www.baidu.com
```
**netcat：测试udp连通**
```
# 安装
yum install nmap-ncat
# 使用
nc -u 127.0.0.1 9502 #upd通信
```
**sort：文本处理，排序**
```
# 按数字倒序排序
du -s * | sort -nr

# 对文件内容排序
sort a.txt

# 对指定列排序
sort -k 3 a.txt
```
**grep：文本处理，查询**
```
# 根据正则表达式查找文件内容
grep t a.txt

# 反向搜索（输出不匹配该模式的行）
grep -v t a.txt

# 带上行号
grep -n t a.txt

# 统计匹配的行数
grep -c t a.txt

# 指定多个匹配条件，或的关系
grep -e t -e f a.txt

# 忽略大小写
grep -i t a.txt
```

