#### **PHP配置HTTP**
```
server {
	listen       80;
	server_name  www.yourdomain.com;
	root  /var/yourpath;

	location / {
		index  index.php index.html index.htm;
		#如果请求既不是一个文件，也不是一个目录，则执行一下重写规则
		if (!-e $request_filename)
		{
				#地址作为将参数rewrite到index.php上。
				rewrite ^/(.*)$ /index.php/$1;
				#若是子目录则使用下面这句，将subdir改成目录名称即可。
				#rewrite ^/subdir/(.*)$ /subdir/index.php/$1;
		}
	}

	location ~ \.php {
		include fastcgi_params;
		##pathinfo支持start
		#定义变量 $path_info ，用于存放pathinfo信息
		set $path_info "";
		#定义变量 $real_script_name，用于存放真实地址
		set $real_script_name $fastcgi_script_name;
		#如果地址与引号内的正则表达式匹配
		if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
				#将文件地址赋值给变量 $real_script_name
				set $real_script_name $1;
				#将文件地址后的参数赋值给变量 $path_info
				set $path_info $2;
		}
		#配置fastcgi的一些参数
		fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;
		fastcgi_param SCRIPT_NAME $real_script_name;
		fastcgi_param PATH_INFO $path_info;
		###pathinfo支持end
		fastcgi_intercept_errors on;
		fastcgi_pass   127.0.0.1:9000;
	}
}
```

#### **PHP配置HTTPS**
```
server {
	listen       443;
	server_name  www.yourdomain.com;
	root  /var/yourpath;

	ssl on;
	ssl_certificate   /var/cert/yourfile.pem;
	ssl_certificate_key  /var/cert/yourfile.key;
	ssl_session_timeout 5m;
	ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;
	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
	ssl_prefer_server_ciphers on;

	location / {
		index  index.php index.html index.htm;
		#如果请求既不是一个文件，也不是一个目录，则执行一下重写规则
		if (!-e $request_filename)
		{
				#地址作为将参数rewrite到index.php上。
				rewrite ^/(.*)$ /index.php/$1;
				#若是子目录则使用下面这句，将subdir改成目录名称即可。
				#rewrite ^/subdir/(.*)$ /subdir/index.php/$1;
		}
	}

	location ~ \.php {
		include fastcgi_params;
		##pathinfo支持start
		#定义变量 $path_info ，用于存放pathinfo信息
		set $path_info "";
		#定义变量 $real_script_name，用于存放真实地址
		set $real_script_name $fastcgi_script_name;
		#如果地址与引号内的正则表达式匹配
		if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
				#将文件地址赋值给变量 $real_script_name
				set $real_script_name $1;
				#将文件地址后的参数赋值给变量 $path_info
				set $path_info $2;
		}
		#配置fastcgi的一些参数
		fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;
		fastcgi_param SCRIPT_NAME $real_script_name;
		fastcgi_param PATH_INFO $path_info;
		###pathinfo支持end
		fastcgi_intercept_errors on;
		fastcgi_pass   127.0.0.1:9000;
	}
}
```

#### **配置gzip**
```
server {
	listen       80;
	server_name  www.yourdomain.com;
	root  /var/yourpath;

	gzip on;
	gzip_min_length 2k;
	gzip_comp_level 3;
	gzip_types application/css application/javascript text/plain text/css text/javascript font/ttf font/otf;
	gzip_vary on;
}
```
#### **配置反向代理**
```
server {
	listen       80;
	server_name  www.yourdomain.com;
	root  /var/yourpath;

	location / {
		proxy_pass http://www.domain1.com/;
	}
	location / {
		proxy_pass https://www.domain2.com/;
	}
	location /image {
		proxy_pass http://www.domain3.com/;
	}
}
```
