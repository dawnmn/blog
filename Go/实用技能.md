**分享你的代码**
使用 [go playground](https://go.dev/play) 在线分享代码，可线上运行go程序。

**trace**


```
func main() {

	//创建trace文件
	f, err := os.Create("trace.out")
	if err != nil {
		panic(err)
	}

	defer f.Close()

	//启动trace goroutine
	err = trace.Start(f)
	if err != nil {
		panic(err)
	}
	defer trace.Stop()

	//main
	fmt.Println("Hello World")
}
```

go run trace.go
go tool trace trace.out

**pprof**


go 语言提供了 runtime/pprof 和 net/http/pprof 两个库，查看cpu、内存、阻塞、互斥锁的情况
```
func main() {
	go func() {
		log.Println(http.ListenAndServe(":6060", nil))
	}()

	http.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
		fmt.Fprintf(w, "URL.Path = %q\n", r.URL.Path)
	})
	log.Fatal(http.ListenAndServe("localhost:8000", nil))
}
```

http://127.0.0.1:6060/debug/pprof/
点击 profile，等待30s下载
go tool pprof -http=:8090 profile